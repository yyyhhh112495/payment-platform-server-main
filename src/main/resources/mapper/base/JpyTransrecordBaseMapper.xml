<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cwp.jpy.mapper.base.JpyTransrecordBaseMapper">

    <select id="queryJsNumById" resultType="java.util.Map" parameterType="java.lang.String">
        select ROUND(IfNULL(sum(jsnum),'0'),2) totaljsnum
        from jpy_transrecord
        <trim prefix="where" suffixOverrides="and | or">
            <if test="bussisid != null and bussisid!=''">
                bussid=#{bussisid} and
            </if>
        </trim>
    </select>


    <select id="queryJsNumByIdByStatus" resultType="java.util.Map" parameterType="java.util.Map">
        SELECT
        IFNULL( SUM( CASE transtatus WHEN '0' THEN jsnum ELSE '0' END ), 0 ) jsingnum,
        IFNULL( SUM( CASE transtatus WHEN '1' THEN jsnum ELSE '0' END ), 0 ) jsednum
        FROM
        jpy_transrecord
        <trim prefix="where" suffixOverrides="and | or">
            <if test="bussinessid != null and bussinessid!=''">
                bussid=#{bussinessid} and
            </if>
        </trim>
    </select>
    <select id="queryAllTasks" resultType="java.util.Map"
    parameterType="java.util.Map">
        select jpy_transrecord.*,jpy_org.bussinessname
                                ,ROUND(jpy_transrecord.jsnum*jpy_org.bussratio/(100-jpy_org.bussratio),2) profit
        from jpy_transrecord LEFT JOIN jpy_org on
            jpy_transrecord.bussid=jpy_org.bussinessid
        <trim prefix="where" suffixOverrides="and | or">
            <if test="bussinessname != null and bussinessname!=''">
                jpy_org.bussinessname = #{bussinessname} and
            </if>
            <if test="transtatus != null and transtatus!=''">
                jpy_transrecord.transtatus = #{transtatus}
            </if>
        </trim>
    </select>

    <select id="queryAllTaskBybussisId" resultType="java.util.Map"
            parameterType="java.util.Map">
        select jpy_transrecord.*,jpy_org.bussinessname
        from jpy_transrecord LEFT JOIN jpy_org on
            jpy_transrecord.bussid=jpy_org.bussinessid
        <trim prefix="where" suffixOverrides="and | or">
            <if test="bussinessname != null and bussinessname!=''">
                jpy_org.bussinessname = #{bussinessname} and
            </if>
            <if test="bussinessid != null and bussinessid!=''">
                jpy_org.bussinessid = #{bussinessid} and
            </if>
            <if test="transtatus != null and transtatus!=''">
                jpy_transrecord.transtatus = #{transtatus}
            </if>
        </trim>
    </select>
    <insert id="insertJpyTransrecord" >
        INSERT INTO `jpy_transrecord`
        (
        <trim suffixOverrides=",">
                    <if test="bussid!=null">
                        `bussid`,
                    </if>
                    <if test="jstradeno!=null">
                        `jstradeno`,
                    </if>
                    <if test="jstime!=null">
                        `jstime`,
                    </if>
                    <if test="jsnum!=null">
                        `jsnum`,
                    </if>
                    <if test="transcountid!=null">
                        `transcountid`,
                    </if>
                    <if test="transbankname!=null">
                        `transbankname`,
                    </if>
                    <if test="transcountname!=null">
                        `transcountname`,
                    </if>
                    <if test="transtatus!=null">
                        `transtatus`,
                    </if>
                    <if test="transcomtime!=null">
                        `transcomtime`,
                    </if>
        </trim>
        )
        VALUES
        (
        <trim suffixOverrides=",">
                <if test="bussid!=null">
                    #{bussid},
                </if>
                <if test="jstradeno!=null">
                    #{jstradeno},
                </if>
                <if test="jstime!=null">
                    #{jstime},
                </if>
                <if test="jsnum!=null">
                    #{jsnum},
                </if>
                <if test="transcountid!=null">
                    #{transcountid},
                </if>
                <if test="transbankname!=null">
                    #{transbankname},
                </if>
                <if test="transcountname!=null">
                    #{transcountname},
                </if>
                <if test="transtatus!=null">
                    #{transtatus},
                </if>
                <if test="transcomtime!=null">
                    #{transcomtime},
                </if>
        </trim>
        )
    </insert>




    <update id="updateJpyTransrecord">
        UPDATE `jpy_transrecord`
        SET
        <trim suffixOverrides=",">
            <if test="bussid != null and bussid!=''">
                `bussid` = #{bussid},
            </if>
            <if test="jstime != null and jstime!=''">
                `jstime` = #{jstime},
            </if>
            <if test="jsnum != null and jsnum!=''">
                `jsnum` = #{jsnum},
            </if>
            <if test="transcountid != null and transcountid!=''">
                `transcountid` = #{transcountid},
            </if>
            <if test="transbankname != null and transbankname!=''">
                `transbankname` = #{transbankname},
            </if>
            <if test="transcountname != null and transcountname!=''">
                `transcountname` = #{transcountname},
            </if>
            <if test="transtatus != null and transtatus!=''">
                `transtatus` = #{transtatus},
            </if>
            <if test="transcomtime != null and transcomtime!=''">
                `transcomtime` = #{transcomtime},
            </if>
        </trim>
        WHERE
        <trim suffixOverrides="and">
                `jstradeno` = #{jstradeno} and
        </trim>
    </update>

    <update id="update">
        UPDATE `jpy_transrecord`
        SET
        <trim suffixOverrides=",">
        <if test="set.bussid != null and set.bussid!=''">
            `bussid` = #{set.bussid},
        </if>
        <if test="set.jstime != null and set.jstime!=''">
            `jstime` = #{set.jstime},
        </if>
        <if test="set.jsnum != null and set.jsnum!=''">
            `jsnum` = #{set.jsnum},
        </if>
        <if test="set.transcountid != null and set.transcountid!=''">
            `transcountid` = #{set.transcountid},
        </if>
        <if test="set.transbankname != null and set.transbankname!=''">
            `transbankname` = #{set.transbankname},
        </if>
        <if test="set.transcountname != null and set.transcountname!=''">
            `transcountname` = #{set.transcountname},
        </if>
        <if test="set.transtatus != null and set.transtatus!=''">
            `transtatus` = #{set.transtatus},
        </if>
        <if test="set.transcomtime != null and set.transcomtime!=''">
            `transcomtime` = #{set.transcomtime},
        </if>
        </trim>
        <trim prefix="where" suffixOverrides="and | or">
                <if test="where.bussidList != null">
                    `bussid` in
                    <foreach collection="where.bussidList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyBussid!=null and where.fuzzyBussid.size()>0">
                (
                <foreach collection="where.fuzzyBussid"  separator="or" item="item">
                    `Bussid` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyBussid!=null and where.rightFuzzyBussid.size()>0">
                (
                <foreach collection="where.rightFuzzyBussid"  separator="or" item="item">
                    `Bussid` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.jstradenoList != null">
                    `jstradeno` in
                    <foreach collection="where.jstradenoList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyJstradeno!=null and where.fuzzyJstradeno.size()>0">
                (
                <foreach collection="where.fuzzyJstradeno"  separator="or" item="item">
                    `Jstradeno` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyJstradeno!=null and where.rightFuzzyJstradeno.size()>0">
                (
                <foreach collection="where.rightFuzzyJstradeno"  separator="or" item="item">
                    `Jstradeno` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.jstimeList != null">
                    `jstime` in
                    <foreach collection="where.jstimeList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyJstime!=null and where.fuzzyJstime.size()>0">
                (
                <foreach collection="where.fuzzyJstime"  separator="or" item="item">
                    `Jstime` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyJstime!=null and where.rightFuzzyJstime.size()>0">
                (
                <foreach collection="where.rightFuzzyJstime"  separator="or" item="item">
                    `Jstime` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.jsnumList != null">
                    `jsnum` in
                    <foreach collection="where.jsnumList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyJsnum!=null and where.fuzzyJsnum.size()>0">
                (
                <foreach collection="where.fuzzyJsnum"  separator="or" item="item">
                    `Jsnum` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyJsnum!=null and where.rightFuzzyJsnum.size()>0">
                (
                <foreach collection="where.rightFuzzyJsnum"  separator="or" item="item">
                    `Jsnum` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.transcountidList != null">
                    `transcountid` in
                    <foreach collection="where.transcountidList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyTranscountid!=null and where.fuzzyTranscountid.size()>0">
                (
                <foreach collection="where.fuzzyTranscountid"  separator="or" item="item">
                    `Transcountid` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyTranscountid!=null and where.rightFuzzyTranscountid.size()>0">
                (
                <foreach collection="where.rightFuzzyTranscountid"  separator="or" item="item">
                    `Transcountid` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.transbanknameList != null">
                    `transbankname` in
                    <foreach collection="where.transbanknameList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyTransbankname!=null and where.fuzzyTransbankname.size()>0">
                (
                <foreach collection="where.fuzzyTransbankname"  separator="or" item="item">
                    `Transbankname` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyTransbankname!=null and where.rightFuzzyTransbankname.size()>0">
                (
                <foreach collection="where.rightFuzzyTransbankname"  separator="or" item="item">
                    `Transbankname` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.transcountnameList != null">
                    `transcountname` in
                    <foreach collection="where.transcountnameList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyTranscountname!=null and where.fuzzyTranscountname.size()>0">
                (
                <foreach collection="where.fuzzyTranscountname"  separator="or" item="item">
                    `Transcountname` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyTranscountname!=null and where.rightFuzzyTranscountname.size()>0">
                (
                <foreach collection="where.rightFuzzyTranscountname"  separator="or" item="item">
                    `Transcountname` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.transtatusList != null">
                    `transtatus` in
                    <foreach collection="where.transtatusList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyTranstatus!=null and where.fuzzyTranstatus.size()>0">
                (
                <foreach collection="where.fuzzyTranstatus"  separator="or" item="item">
                    `Transtatus` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyTranstatus!=null and where.rightFuzzyTranstatus.size()>0">
                (
                <foreach collection="where.rightFuzzyTranstatus"  separator="or" item="item">
                    `Transtatus` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.transcomtimeList != null">
                    `transcomtime` in
                    <foreach collection="where.transcomtimeList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyTranscomtime!=null and where.fuzzyTranscomtime.size()>0">
                (
                <foreach collection="where.fuzzyTranscomtime"  separator="or" item="item">
                    `Transcomtime` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyTranscomtime!=null and where.rightFuzzyTranscomtime.size()>0">
                (
                <foreach collection="where.rightFuzzyTranscomtime"  separator="or" item="item">
                    `Transcomtime` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
        </trim>
    </update>


    <resultMap type="com.cwp.jpy.model.JpyTransrecord" id="JpyTransrecordMap">
        <result property="bussid" column="bussid"/>
        <result property="jstradeno" column="jstradeno"/>
        <result property="jstime" column="jstime"/>
        <result property="jsnum" column="jsnum"/>
        <result property="transcountid" column="transcountid"/>
        <result property="transbankname" column="transbankname"/>
        <result property="transcountname" column="transcountname"/>
        <result property="transtatus" column="transtatus"/>
        <result property="transcomtime" column="transcomtime"/>
    </resultMap>


    <select id="queryJpyTransrecord" resultMap="JpyTransrecordMap">
        select
        <include refid="baseResult"></include>
        from  `jpy_transrecord`
        <trim prefix="where" suffixOverrides="and | or">
            <if test="bussid != null and bussid!=''">
                `bussid` = #{bussid} and
            </if>
            <if test="jstradeno != null and jstradeno!=''">
                `jstradeno` = #{jstradeno} and
            </if>
            <if test="jstime != null and jstime!=''">
                `jstime` = #{jstime} and
            </if>
            <if test="jsnum != null and jsnum!=''">
                `jsnum` = #{jsnum} and
            </if>
            <if test="transcountid != null and transcountid!=''">
                `transcountid` = #{transcountid} and
            </if>
            <if test="transbankname != null and transbankname!=''">
                `transbankname` = #{transbankname} and
            </if>
            <if test="transcountname != null and transcountname!=''">
                `transcountname` = #{transcountname} and
            </if>
            <if test="transtatus != null and transtatus!=''">
                `transtatus` = #{transtatus} and
            </if>
            <if test="transcomtime != null and transcomtime!=''">
                `transcomtime` = #{transcomtime} and
            </if>
            <if test = "(_parameter instanceof com.cwp.jpy.model.JpyTransrecord$QueryBuilder) == true">
                <if test="bussidList != null">
                    `bussid` in
                    <foreach collection="bussidList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyBussid!=null and fuzzyBussid.size()>0">
                    (
                    <foreach collection="fuzzyBussid"  separator="or" item="item">
                        `Bussid` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyBussid!=null and rightFuzzyBussid.size()>0">
                    (
                    <foreach collection="rightFuzzyBussid"  separator="or" item="item">
                        `Bussid` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="jstradenoList != null">
                    `jstradeno` in
                    <foreach collection="jstradenoList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyJstradeno!=null and fuzzyJstradeno.size()>0">
                    (
                    <foreach collection="fuzzyJstradeno"  separator="or" item="item">
                        `Jstradeno` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyJstradeno!=null and rightFuzzyJstradeno.size()>0">
                    (
                    <foreach collection="rightFuzzyJstradeno"  separator="or" item="item">
                        `Jstradeno` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="jstimeList != null">
                    `jstime` in
                    <foreach collection="jstimeList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyJstime!=null and fuzzyJstime.size()>0">
                    (
                    <foreach collection="fuzzyJstime"  separator="or" item="item">
                        `Jstime` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyJstime!=null and rightFuzzyJstime.size()>0">
                    (
                    <foreach collection="rightFuzzyJstime"  separator="or" item="item">
                        `Jstime` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="jsnumList != null">
                    `jsnum` in
                    <foreach collection="jsnumList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyJsnum!=null and fuzzyJsnum.size()>0">
                    (
                    <foreach collection="fuzzyJsnum"  separator="or" item="item">
                        `Jsnum` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyJsnum!=null and rightFuzzyJsnum.size()>0">
                    (
                    <foreach collection="rightFuzzyJsnum"  separator="or" item="item">
                        `Jsnum` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="transcountidList != null">
                    `transcountid` in
                    <foreach collection="transcountidList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyTranscountid!=null and fuzzyTranscountid.size()>0">
                    (
                    <foreach collection="fuzzyTranscountid"  separator="or" item="item">
                        `Transcountid` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTranscountid!=null and rightFuzzyTranscountid.size()>0">
                    (
                    <foreach collection="rightFuzzyTranscountid"  separator="or" item="item">
                        `Transcountid` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="transbanknameList != null">
                    `transbankname` in
                    <foreach collection="transbanknameList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyTransbankname!=null and fuzzyTransbankname.size()>0">
                    (
                    <foreach collection="fuzzyTransbankname"  separator="or" item="item">
                        `Transbankname` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTransbankname!=null and rightFuzzyTransbankname.size()>0">
                    (
                    <foreach collection="rightFuzzyTransbankname"  separator="or" item="item">
                        `Transbankname` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="transcountnameList != null">
                    `transcountname` in
                    <foreach collection="transcountnameList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyTranscountname!=null and fuzzyTranscountname.size()>0">
                    (
                    <foreach collection="fuzzyTranscountname"  separator="or" item="item">
                        `Transcountname` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTranscountname!=null and rightFuzzyTranscountname.size()>0">
                    (
                    <foreach collection="rightFuzzyTranscountname"  separator="or" item="item">
                        `Transcountname` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="transtatusList != null">
                    `transtatus` in
                    <foreach collection="transtatusList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyTranstatus!=null and fuzzyTranstatus.size()>0">
                    (
                    <foreach collection="fuzzyTranstatus"  separator="or" item="item">
                        `Transtatus` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTranstatus!=null and rightFuzzyTranstatus.size()>0">
                    (
                    <foreach collection="rightFuzzyTranstatus"  separator="or" item="item">
                        `Transtatus` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="transcomtimeList != null">
                    `transcomtime` in
                    <foreach collection="transcomtimeList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyTranscomtime!=null and fuzzyTranscomtime.size()>0">
                    (
                    <foreach collection="fuzzyTranscomtime"  separator="or" item="item">
                        `Transcomtime` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTranscomtime!=null and rightFuzzyTranscomtime.size()>0">
                    (
                    <foreach collection="rightFuzzyTranscomtime"  separator="or" item="item">
                        `Transcomtime` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
            </if>
        </trim>
    </select>

    <select id="queryJpyTransrecordLimit1" resultMap="JpyTransrecordMap">
        select
        <include refid="baseResult"></include>
        from  `jpy_transrecord`
        <trim prefix="where" suffixOverrides="and | or">
            <if test="bussid != null and bussid!=''">
                `bussid` = #{bussid} and
            </if>
            <if test="jstradeno != null and jstradeno!=''">
                `jstradeno` = #{jstradeno} and
            </if>
            <if test="jstime != null and jstime!=''">
                `jstime` = #{jstime} and
            </if>
            <if test="jsnum != null and jsnum!=''">
                `jsnum` = #{jsnum} and
            </if>
            <if test="transcountid != null and transcountid!=''">
                `transcountid` = #{transcountid} and
            </if>
            <if test="transbankname != null and transbankname!=''">
                `transbankname` = #{transbankname} and
            </if>
            <if test="transcountname != null and transcountname!=''">
                `transcountname` = #{transcountname} and
            </if>
            <if test="transtatus != null and transtatus!=''">
                `transtatus` = #{transtatus} and
            </if>
            <if test="transcomtime != null and transcomtime!=''">
                `transcomtime` = #{transcomtime} and
            </if>
            <if test = "(_parameter instanceof com.cwp.jpy.model.JpyTransrecord$QueryBuilder) == true">
                    <if test="bussidList != null">
                        `bussid` in
                        <foreach collection="bussidList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyBussid!=null and fuzzyBussid.size()>0">
                    (
                    <foreach collection="fuzzyBussid"  separator="or" item="item">
                        `Bussid` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyBussid!=null and rightFuzzyBussid.size()>0">
                    (
                    <foreach collection="rightFuzzyBussid"  separator="or" item="item">
                        `Bussid` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="jstradenoList != null">
                        `jstradeno` in
                        <foreach collection="jstradenoList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyJstradeno!=null and fuzzyJstradeno.size()>0">
                    (
                    <foreach collection="fuzzyJstradeno"  separator="or" item="item">
                        `Jstradeno` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyJstradeno!=null and rightFuzzyJstradeno.size()>0">
                    (
                    <foreach collection="rightFuzzyJstradeno"  separator="or" item="item">
                        `Jstradeno` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="jstimeList != null">
                        `jstime` in
                        <foreach collection="jstimeList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyJstime!=null and fuzzyJstime.size()>0">
                    (
                    <foreach collection="fuzzyJstime"  separator="or" item="item">
                        `Jstime` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyJstime!=null and rightFuzzyJstime.size()>0">
                    (
                    <foreach collection="rightFuzzyJstime"  separator="or" item="item">
                        `Jstime` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="jsnumList != null">
                        `jsnum` in
                        <foreach collection="jsnumList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyJsnum!=null and fuzzyJsnum.size()>0">
                    (
                    <foreach collection="fuzzyJsnum"  separator="or" item="item">
                        `Jsnum` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyJsnum!=null and rightFuzzyJsnum.size()>0">
                    (
                    <foreach collection="rightFuzzyJsnum"  separator="or" item="item">
                        `Jsnum` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="transcountidList != null">
                        `transcountid` in
                        <foreach collection="transcountidList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyTranscountid!=null and fuzzyTranscountid.size()>0">
                    (
                    <foreach collection="fuzzyTranscountid"  separator="or" item="item">
                        `Transcountid` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTranscountid!=null and rightFuzzyTranscountid.size()>0">
                    (
                    <foreach collection="rightFuzzyTranscountid"  separator="or" item="item">
                        `Transcountid` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="transbanknameList != null">
                        `transbankname` in
                        <foreach collection="transbanknameList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyTransbankname!=null and fuzzyTransbankname.size()>0">
                    (
                    <foreach collection="fuzzyTransbankname"  separator="or" item="item">
                        `Transbankname` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTransbankname!=null and rightFuzzyTransbankname.size()>0">
                    (
                    <foreach collection="rightFuzzyTransbankname"  separator="or" item="item">
                        `Transbankname` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="transcountnameList != null">
                        `transcountname` in
                        <foreach collection="transcountnameList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyTranscountname!=null and fuzzyTranscountname.size()>0">
                    (
                    <foreach collection="fuzzyTranscountname"  separator="or" item="item">
                        `Transcountname` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTranscountname!=null and rightFuzzyTranscountname.size()>0">
                    (
                    <foreach collection="rightFuzzyTranscountname"  separator="or" item="item">
                        `Transcountname` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="transtatusList != null">
                        `transtatus` in
                        <foreach collection="transtatusList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyTranstatus!=null and fuzzyTranstatus.size()>0">
                    (
                    <foreach collection="fuzzyTranstatus"  separator="or" item="item">
                        `Transtatus` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTranstatus!=null and rightFuzzyTranstatus.size()>0">
                    (
                    <foreach collection="rightFuzzyTranstatus"  separator="or" item="item">
                        `Transtatus` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="transcomtimeList != null">
                        `transcomtime` in
                        <foreach collection="transcomtimeList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyTranscomtime!=null and fuzzyTranscomtime.size()>0">
                    (
                    <foreach collection="fuzzyTranscomtime"  separator="or" item="item">
                        `Transcomtime` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyTranscomtime!=null and rightFuzzyTranscomtime.size()>0">
                    (
                    <foreach collection="rightFuzzyTranscomtime"  separator="or" item="item">
                        `Transcomtime` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
            </if>
        </trim>
        limit 1
    </select>

    <sql id="allResult">
        <trim suffixOverrides=",">
        `bussid`,
        `jstradeno`,
        `jstime`,
        `jsnum`,
        `transcountid`,
        `transbankname`,
        `transcountname`,
        `transtatus`,
        `transcomtime`,
        </trim>
    </sql>



    <sql id="baseResult">
        <trim suffixOverrides=",">
            <if test = "(_parameter instanceof com.cwp.jpy.model.JpyTransrecord$QueryBuilder) == true">

                <if test="fetchFields==null">
                    <include refid="allResult"></include>
                </if>
                <if test="fetchFields!=null">
                    <if test="fetchFields.AllFields !=null">
                        <include refid="allResult"></include>
                    </if>
                    <if test="fetchFields.AllFields ==null and fetchFields.fetchFields==null and fetchFields.excludeFields==null and fetchFields.otherFields==null">
                        <include refid="allResult"></include>
                    </if>
                    <if test="fetchFields.AllFields==null and fetchFields.fetchFields!=null">
                    <if test="fetchFields.fetchFields.bussid==true">
                        `bussid`,
                    </if>
                    <if test="fetchFields.fetchFields.jstradeno==true">
                        `jstradeno`,
                    </if>
                    <if test="fetchFields.fetchFields.jstime==true">
                        `jstime`,
                    </if>
                    <if test="fetchFields.fetchFields.jsnum==true">
                        `jsnum`,
                    </if>
                    <if test="fetchFields.fetchFields.transcountid==true">
                        `transcountid`,
                    </if>
                    <if test="fetchFields.fetchFields.transbankname==true">
                        `transbankname`,
                    </if>
                    <if test="fetchFields.fetchFields.transcountname==true">
                        `transcountname`,
                    </if>
                    <if test="fetchFields.fetchFields.transtatus==true">
                        `transtatus`,
                    </if>
                    <if test="fetchFields.fetchFields.transcomtime==true">
                        `transcomtime`,
                    </if>
                    </if>
                    <if test="fetchFields.AllFields==null and fetchFields.excludeFields!=null">
                    <if test="fetchFields.excludeFields.bussid==null">
                        `bussid`,
                    </if>
                    <if test="fetchFields.excludeFields.jstradeno==null">
                        `jstradeno`,
                    </if>
                    <if test="fetchFields.excludeFields.jstime==null">
                        `jstime`,
                    </if>
                    <if test="fetchFields.excludeFields.jsnum==null">
                        `jsnum`,
                    </if>
                    <if test="fetchFields.excludeFields.transcountid==null">
                        `transcountid`,
                    </if>
                    <if test="fetchFields.excludeFields.transbankname==null">
                        `transbankname`,
                    </if>
                    <if test="fetchFields.excludeFields.transcountname==null">
                        `transcountname`,
                    </if>
                    <if test="fetchFields.excludeFields.transtatus==null">
                        `transtatus`,
                    </if>
                    <if test="fetchFields.excludeFields.transcomtime==null">
                        `transcomtime`,
                    </if>
                    </if>
                    <if test="fetchFields.otherFields!=null and fetchFields.otherFields.size>0">
                        <foreach collection="fetchFields.otherFields" index="index" item="item" separator=",">
                        `#{item}`
                        </foreach>
                    </if>
                </if>
            </if>
            <if test="(_parameter instanceof com.cwp.jpy.model.JpyTransrecord$QueryBuilder) == false" >
                <include refid="allResult"></include>
            </if>

        </trim>
    </sql>


</mapper>